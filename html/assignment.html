<%inherit file="base.html"/>

<%def name="head()">
<script type="text/javascript">

$(document).ready(function () {
  // First, get assignment configuration from network
  var headings = ["id","name","login","files"];
  $.getJSON("${ROOT_URL}/assignment/${COURSE}/${ASSIGNMENT}",function(config) {
    var tasks = config["tasks"];
    headings = headings.concat(tasks);
    var selector = document.getElementById("taskSelector");
    for(var i = 0; i < tasks.length;++i) {
        var option = document.createElement("option");
	option.text = tasks[i];
        selector.add(option);
    }
  });

  // Second, get submission information from network and populate display table
  var table = document.getElementById("submissions");
  $.getJSON("${ROOT_URL}/submissions/${COURSE}/${ASSIGNMENT}",function(submissions) {
    populateTable(table,submissions,headings);
  });
});

function runTask() {
 var selector = document.getElementById("taskSelector");
 var selected = selector.options[selector.selectedIndex];
 alert("Run Task " + selected.text);
}

</script>

</%def>

<%def name="body()">

<h2>${COURSE}/ ${ASSIGNMENT}</h2>

<div id="display">
  <center>
    <table class="data" id="submissions">
    </table>
  </center>
</div>

<div id="toolbar">
  <button type="button">Select All</button>
  <button type="button">E-Mail</button>
  <button type="button" onClick="runTask()">Run Task:</button>
  <select id="taskSelector"></select> 
</div>

</%def>
